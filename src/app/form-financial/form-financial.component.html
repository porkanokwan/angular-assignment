<h2>Swiftprice Financial loan</h2>
<form [formGroup]="formFanancial" (ngSubmit)="onSubmit()">
  <div class="d-flex flex-column p-3">
    <div class="row">
      <input
        type="text"
        pInputText
        placeholder="ชื่อผู้กู้ยืมเงิน"
        formControlName="borrowName"
      />
      <span
        *ngIf="
          (formFanancial.get('borrowName').invalid &&
            formFanancial.get('borrowName').touched) ||
          (formFanancial.get('borrowName').invalid && isSubmit)
        "
        >Please Enter Valid Name</span
      >
    </div>
    <div class="row my-2">
      <input
        type="text"
        pInputText
        placeholder="เงินต้น(บาท)"
        formControlName="principal"
      />
      <span
        *ngIf="
          (formFanancial.get('principal').invalid &&
            formFanancial.get('principal').touched) ||
          (formFanancial.get('principal').invalid && isSubmit)
        "
        >Principal should be intreger only and between 100,000 and
        10,000,000!</span
      >
    </div>
    <div class="row d-inline">
      <input
        type="text"
        pInputText
        placeholder="ดอกเบี้ย(%)"
        formControlName="tax"
        style="width: auto"
      />
      per
      <p-dropdown formControlName="taxcal" [options]="taxOptions"></p-dropdown>
    </div>
    <span
      *ngIf="
        (formFanancial.get('tax').invalid &&
          formFanancial.get('tax').touched) ||
        (formFanancial.get('tax').invalid && isSubmit)
      "
      >Tax should between 5-25% and can be decimal only 1 digit</span
    >
    <div class="row my-2">
      <input
        type="text"
        pInputText
        placeholder="ระยะเวลาปีกู้ยืม"
        formControlName="years"
      />
      <span
        *ngIf="
          (formFanancial.get('years').invalid &&
            formFanancial.get('years').touched) ||
          (formFanancial.get('years').invalid && isSubmit)
        "
        >Years should be intreger and between 1-10 years
      </span>
    </div>
    <div class="d-inline mt-2">
      <p-button
        styleClass="p-button-success me-3"
        label="Save"
        type="submit"
      ></p-button>
      <p-button
        styleClass="p-button-danger"
        label="Cancle"
        type="button"
        (click)="onCancle()"
      ></p-button>
    </div>
  </div>
</form>

<h4>Expected Interest Income: {{ allInterest.toLocaleString() }}</h4>
<div class="d-flex flex-wrap">
  <app-loan-list
    *ngFor="let item of loans; let i = index"
    [loan]="item"
    [index]="i"
    (onDeleteLoan)="onDeleteLoans($event)"
  ></app-loan-list>
</div>
